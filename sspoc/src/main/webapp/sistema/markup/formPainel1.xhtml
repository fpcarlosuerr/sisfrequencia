<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <h:outputStylesheet name="css/jsfcrud.css" />
    </h:head>
    <ui:composition template="/template/template.xhtml">
        <ui:define name="content">       

            <!--<p:messages id="msgid"></p:messages>-->
            <h:panelGroup id="display" layout="block">                    

                <fieldset>
                    <legend>DashBoard - Cálculo do índice Mark-up</legend>
                    <div class="modal-body" style="font-size: 12px">
                        <div class="row">
                            <div class="col-md-6">
                                <h:form id="PainelForm">
                                    <p:panelGrid>

                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    Preço de Venda 
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="precoVenda" value="#{painelABean.indiceMarkup.precoVenda}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)Custo Indireto de Fabricação 
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="custoIndiretoFabricacao" value="#{painelABean.indiceMarkup.custoIndiretoFabricacao}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)ICMS sobre Vendas
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="icmsSobreVendas" value="#{painelABean.indiceMarkup.icmsSobreVendas}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)PIS / COFINS
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="pisCofins" value="#{painelABean.indiceMarkup.pisCofins}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)Despesas Comerciais Fixas
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="despesasComerciaisFixas" value="#{painelABean.indiceMarkup.despesasComerciaisFixas}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)Despesas Administrativas
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="despesasAdministrativas" value="#{painelABean.indiceMarkup.despesasAdministrativas}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)Despesas Financeiras
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="despesasFinanceiras" value="#{painelABean.indiceMarkup.despesasFinanceiras}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)Custo de Oportunidade
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="custoOportunidade" value="#{painelABean.indiceMarkup.custoOportunidade}"  size="5"/>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (-)Margem de Lucro desejada
                                                </div>
                                                <div class="col-md-7">                              
                                                    <p:inputText id="margemLucroDesejada" value="#{painelABean.indiceMarkup.margemLucroDesejada}"  size="5">

                                                    </p:inputText>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row" style="background-color: #bce8f1">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    (=) Mark-up Divisor 
                                                </div>
                                                <div class="col-md-7">                              
                                                    <h:outputText id="markupDivisor" value="#{painelABean.indiceMarkup.markupDivisor}">
                                                        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00"/>
                                                    </h:outputText>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="background-color: #bce8f1">
                                            <div class="col-lg-12">
                                                <div class="col-md-5">
                                                    ou Mark-up Multiplicador
                                                </div>
                                                <div class="col-md-7">                              
                                                    <h:outputText id="markupMultiplicador" value="#{painelABean.indiceMarkup.markupMultiplicador}">
                                                        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00"/>
                                                    </h:outputText>
                                                </div>
                                            </div>
                                        </div>
                                    </p:panelGrid>
                                    <p:commandButton value="Calcular" update=":PainelForm"
                                                     actionListener="#{painelABean.calculaIndice()}" icon="ui-icon-disk" />
                                </h:form>
                            </div>

                            <div class="col-md-6">
                                <h:form id="PainelForm2">
                                    <p:panelGrid>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="col-md-3">
                                                    Produto: 
                                                </div>
                                                <div class="col-md-9">                              
                                                    <p:selectOneMenu id="grupoProduto" value="#{painelABean.produto}" 
                                                                     filter="true"  converter="converterPadrao">

                                                        <f:selectItems value="#{painelABean.listProduto}"
                                                                       var="varP"
                                                                       itemLabel="#{varP.nome}"
                                                                       itemValue="#{varP}"
                                                                       />
                                                        <p:ajax listener="#{painelABean.pegarProduto()}" process="@this" partialSubmit="true" update=":PainelForm2"></p:ajax>                                                        
                                                    </p:selectOneMenu>	
                                                </div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Valor de Compra
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="valorUnitario" value="#{painelABean.produto.valorUnitario}" />
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Qtd Estoque 
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="quantidadeEstoque" value="#{painelABean.produto.quantidadeEstoque}" />
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Valor de Venda 
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="valorVenda" value="#{painelABean.produto.valorVenda}" />
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row" id="pg">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Valor de Venda com MKD
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="valorVendaMKD" value="#{painelABean.novoPrecoVenda}" >
                                                        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00"/>
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row" id="pg">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Valor de Venda com MKM
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="valorVendaMKM" value="#{painelABean.novoPrecoVenda2}" >
                                                        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00"/>
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" id="pg">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Valor Total do Estoque
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="valorTotalEstoque" value="#{painelABean.pegarValorTotalEstoque}" >
                                                        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00"/>
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" id="pg">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Qtd Total do Estoque
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="qtdTotalEstoque" value="#{painelABean.pegarQtdTotalEstoque}" >
                                                        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="0" pattern="#0.00"/>
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row" id="pg">
                                                <div class="col-lg-12">
                                                    <div class="col-md-4">
                                                        Custo Fixo
                                                    </div>
                                                    <div class="col-md-8">                              
                                                        <h:outputText id="porcentoCustoFixo" value="#{painelABean.pegaPercentagemProtudo}" >
                                                        <f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00"/>
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                        </div>
                                    </p:panelGrid> 
                                </h:form>
                            </div>
                        </div>
                    </div>

                </fieldset>
            </h:panelGroup>




        </ui:define>
    </ui:composition>
</html>